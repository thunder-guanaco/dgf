{% load i18n %}

{% with avoid_click|default_if_none:False as avoid_click %}
{% with show_rating|default_if_none:False as show_rating %}
{% with show_name|default_if_none:False as show_name %}
{% with show_full_name|default_if_none:False as show_full_name %}
{% with show_best_score_in_wischlingen|default_if_none:False as show_best_score_in_wischlingen %}
{% with show_wins|default_if_none:False as show_wins %}
{% with show_bag_tag|default_if_none:False as show_bag_tag %}
{% with udisc_score|default_if_none:0 as udisc_score %}
{% with position|default_if_none:0 as position %}
{% with division|default_if_none:'' as division %}
{% with img_size|default:70 as img_size %}
{% with font_size|default:30 as font_size %}

    {% if friend.is_active and not avoid_click %}
        <a class="friend-ball" href="{% url 'dgf:friend_detail' friend.slug %}">
    {% else %}
        <a class="friend-ball">
    {% endif %}

        {% include "dgf/includes/friend_picture.html" with friend=friend img_size=img_size font_size=font_size show_bag_tag=show_bag_tag clickable_bag_tag=False %}
        <div class="friend-name">
            {% if show_full_name and friend.full_name %}{{friend.full_name}}{% endif %}
            {% if show_name and friend.short_name %}{{friend.short_name}}{% endif %}
            {% if show_rating and friend.rating %} ({{friend.rating}}){% endif %}
            {% if show_wins %} ({{friend.wins}} {% trans "wins" %}){% endif %}
            {% if show_best_score_in_wischlingen and friend.best_score_in_wischlingen is not None %}
                {% if friend.best_score_in_wischlingen != 0 %}
                    ({{friend.best_score_in_wischlingen|stringformat:"+i"}})
                {% else %}
                    (E)
                {% endif %}
            {% endif %}
            {% if udisc_score %} ({{udisc_score|stringformat:"+i"}}){% endif %}
        </div>
        {% if position %}
            <div class="friend-result">
                <div class="friend-position">&#12935{{position}};</div>
                {% if division %}
                    <div class="friend-division">{{division.id}}</div>
                {% endif %}
            </div>
        {% endif %}
        {% if bag_tag %}
            <div class="friend-bag-tag"><span>{{bag_tag}}</span></div>
        {% endif %}

    </a>

{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
{% endwith %}
